{% extends 'base.html' %}

{% block content %}
<nav class="navbar is-light" role="navigation" aria-label="main navigation">
    <div class="navbar-brand">
        <a class="navbar-item" href="https://bulma.io">
            
        </a>
    </div>

    <div class="navbar-menu">
        <div class="navbar-start">
            <a class="navbar-item">
                To Do App
            </a>
        </div>

        <div class="navbar-end">
            <div class="navbar-item">
                <form method="POST">
                    {% csrf_token %}
                    <div class="field has-addons">
                        <div class="control">
                            <input name="task" class="input" type="text" placeholder="Add Todo">
                        </div>
                        <div class="control">
                            <button type="submit" class="button is-link">Submit</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</nav>
{% if user.is_authenticated %}
    <h1>Welcome, {{ user.username }}.</h1>
{% endif %} 
{% if request.user.is_authenticated %}
    <a href="{% url 'logout' %}">Logout</a>
{% endif %} 
<section class="section">
    {% if messages %}
            {% for message in messages %}
                <article class="message is-success">
                    <div class="message-header">
                        <p>Nice!</p>
                    </div>
                    <div class="message-body">
                        {{ message }}
                    </div>
                </article>
            {% endfor %}
        {% endif %}
    <table class="table is-hoverable is-fullwidth">
        <thead>
        <tr>
            <th>Task</th>
            <th>Completed</th>
            <th>Date Created</th>
            <th>Delete</th>
        </tr>
        </thead>
        {% for todo in todos %}
            <tr>
                <td>
                    {% if todo.completed == True %}
                        <span style="text-decoration: line-through">{{ todo.task }}</span>
                        
                    {% else %}
                        <a href="{% url 'edit' todo.id %}">
                        {{ todo.task }}
                        </a>
                    {% endif %}
                </td>
                <td>
                    {% if todo.completed == True %}
                        <i class="far fa-check-circle"></i>
                        <a href="{% url 'mark_incomplete' todo.id %}">Done</a>
                    {% else %}
                        <i class="far fa-circle"></i>
                        <a href="{% url 'mark_complete' todo.id %}">Incomplete</a>
                    {% endif %}
                </td>
                <td>
                    {{ todo.created}}
                </td>
                <td>
                    <a href="{% url 'delete' todo.id %}">Remove</a>
                </td>
            </tr>
        {% endfor %}
    </table>
</section>
{% endblock %}